<svg xmlns="http://www.w3.org/2000/svg" width="444.964" height="453.468" version="1.1" viewBox="0 0 117.728 119.977"><defs><marker id="b" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="#000" stroke-width="1pt" d="m0 0 5-5-17.5 5 17.5 5z" transform="matrix(-.2 0 0 -.2 -1.2 0)"/></marker><marker id="c" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="#000" stroke-width="1pt" d="m0 0 5-5-17.5 5 17.5 5z" transform="matrix(-.2 0 0 -.2 -1.2 0)"/></marker><marker id="a" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="#000" stroke-width="1pt" d="m0 0 5-5-17.5 5 17.5 5z" transform="matrix(-.2 0 0 -.2 -1.2 0)"/></marker><filter id="d" width="1.104" height="1.102" x="-.052" y="-.051" color-interpolation-filters="sRGB"><feGaussianBlur stdDeviation="2.316"/></filter></defs><g transform="translate(483.61 -108.01)"><g><rect width="106.61" height="108.86" x="-478.05" y="113.57" filter="url(#d)"/><rect width="106.61" height="108.86" x="-480.29" y="111.33" fill="#f9f9f9"/><rect width="45.287" height="17.581" x="-432.75" y="145.67" fill="red" stroke="#18161a" stroke-linejoin="round" stroke-width=".122" opacity=".497"/><rect width="45.212" height="45.685" x="-432.85" y="168.43" fill="#00f" stroke="#18161a" stroke-linejoin="round" stroke-width=".197" opacity=".497"/></g><g fill="#e7e0e6" stroke="#18161a" stroke-linejoin="round" stroke-width=".06"><rect width="43.364" height="4.495" x="-431.73" y="146.79" opacity=".497"/><rect width="43.364" height="4.495" x="-431.79" y="152.38" opacity=".497"/><rect width="43.364" height="4.495" x="-431.89" y="169.63" opacity=".497"/><rect width="43.364" height="4.495" x="-431.96" y="175.21" opacity=".497"/><rect width="43.364" height="4.495" x="-432.02" y="180.87" opacity=".497"/><rect width="43.364" height="4.495" x="-432.09" y="186.45" opacity=".497"/><rect width="43.364" height="4.495" x="-432.16" y="191.85" opacity=".497"/><rect width="43.364" height="4.495" x="-432.22" y="197.43" opacity=".497"/><rect width="43.364" height="4.495" x="-431.79" y="157.73" opacity=".497"/><rect width="43.364" height="4.495" x="-432.29" y="202.83" opacity=".497"/><rect width="43.364" height="4.495" x="-432.35" y="208.41" opacity=".497"/></g><text x="-425.059" y="144.504" fill="#000" stroke-width=".265" font-family="'Open Sans'" font-size="2.117" letter-spacing="0" text-align="center" text-anchor="middle" word-spacing="0" xml:space="preserve" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;line-height:1.25"><tspan x="-425.059" y="144.504" stroke-width=".265">Worker threads</tspan></text><text x="-427.407" y="166.861" fill="#000" stroke-width=".265" font-family="'Open Sans'" font-size="2.117" letter-spacing="0" text-align="center" text-anchor="middle" word-spacing="0" xml:space="preserve" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;line-height:1.25"><tspan x="-427.407" y="166.861" stroke-width=".265">Task queue</tspan></text><path fill="none" stroke="#000" stroke-width=".965" marker-end="url(#a)" d="m-386.3 172.95c7.3502-6.0322 8.1963-16.693-0.13231-20.373"/><rect width="45.283" height="18.628" x="-432.86" y="120.06" fill="#f60" stroke="#18161a" stroke-linejoin="round" stroke-width=".126" opacity=".497"/><g fill="#e7e0e6" stroke="#18161a" stroke-linejoin="round" stroke-width=".06"><rect width="43.364" height="4.495" x="-431.87" y="121.3" opacity=".497"/><rect width="43.364" height="4.495" x="-431.93" y="126.88" opacity=".497"/><rect width="43.364" height="4.495" x="-432" y="132.54" opacity=".497"/></g><text x="-426.854" y="118.533" fill="#000" stroke-width=".265" font-family="'Open Sans'" font-size="2.117" letter-spacing="0" text-align="center" text-anchor="middle" word-spacing="0" xml:space="preserve" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;line-height:1.25"><tspan x="-426.854" y="118.533" stroke-width=".265">Done queue</tspan></text><path fill="none" stroke="#000" stroke-width=".965" marker-end="url(#c)" d="m-386.6 149.21c7.3502-6.0322 8.1963-16.693-0.13231-20.373"/><g><path fill="#acf" d="m-448.78 157.21-2.8648-3.3692 2.7188-3.3826 0.13363 1.5579 11.817 0.23143-4e-3 -1.8179 3.3851 3.7575-3.6277 3.3848-0.13429-1.8176-11.427 0.0273z"/><text x="-442.997" y="155.212" fill="#000" stroke-width=".415" font-family="'Open Sans'" font-size="3.323" letter-spacing="0" text-align="center" text-anchor="middle" word-spacing="0" xml:space="preserve" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;line-height:1.25"><tspan x="-442.997" y="155.212" stroke-width=".415">SYNC</tspan></text><rect width="16.576" height="50.864" x="-470.06" y="121.56" fill="#e7e0e6" stroke="#18161a" stroke-linejoin="round" stroke-width=".126"/><text x="-461.938" y="144.281" fill="#000" stroke-width=".415" font-family="'Open Sans'" font-size="3.323" letter-spacing="0" text-align="center" text-anchor="middle" word-spacing="0" xml:space="preserve" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;line-height:1.25"><tspan x="-461.938" y="144.281">LWS</tspan><tspan x="-461.938" y="148.434">Service</tspan><tspan x="-461.938" y="152.588">Thread</tspan></text><path fill="#acf" d="m-449.01 132.81-2.8648-3.3692 2.7188-3.3826 0.13363 1.5579 11.817 0.23143-4e-3 -1.8179 3.3851 3.7575-3.6277 3.3848-0.13429-1.8176-11.427 0.0273z"/><text x="-443.231" y="130.807" fill="#000" stroke-width=".415" font-family="'Open Sans'" font-size="3.323" letter-spacing="0" text-align="center" text-anchor="middle" word-spacing="0" xml:space="preserve" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;line-height:1.25"><tspan x="-443.231" y="130.807" stroke-width=".415">reap</tspan></text><text x="-454.413" y="178.394" fill="#000" stroke-width=".239" font-family="'Open Sans'" font-size="1.914" letter-spacing="0" text-align="center" text-anchor="middle" word-spacing="0" xml:space="preserve" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;line-height:1.25"><tspan x="-454.413" y="178.394">All communication with tasks happens</tspan><tspan x="-454.413" y="180.787">in lws service thread context, via the</tspan><tspan x="-454.413" y="183.18">WRITEABLE callback</tspan></text><rect width="31.563" height="12.803" x="-473.25" y="191" fill="#e7e0e6" stroke="#18161a" stroke-linejoin="round" stroke-width=".087" opacity=".497"/></g><g fill="#000" font-family="'Open Sans'" letter-spacing="0" word-spacing="0"><text x="-469.114" y="189.375" stroke-width=".536" font-size="4.291" text-align="center" text-anchor="middle" xml:space="preserve" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;line-height:1.25"><tspan x="-469.114" y="189.375" stroke-width=".536">task</tspan></text><g stroke-width=".265" font-size="2.117"><g text-anchor="middle"><text x="-411.27" y="124.308" text-align="center" xml:space="preserve" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;line-height:1.25"><tspan x="-411.27" y="124.308" stroke-width=".265">task</tspan></text><text x="-411.246" y="129.958" text-align="center" xml:space="preserve" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;line-height:1.25"><tspan x="-411.246" y="129.958" stroke-width=".265">task</tspan></text><text x="-411.324" y="135.468" text-align="center" xml:space="preserve" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;line-height:1.25"><tspan x="-411.324" y="135.468" stroke-width=".265">task</tspan></text><text x="-411.238" y="149.708" text-align="center" xml:space="preserve" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;line-height:1.25"><tspan x="-411.238" y="149.708" stroke-width=".265">task</tspan></text><text x="-411.183" y="155.397" text-align="center" xml:space="preserve" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;line-height:1.25"><tspan x="-411.183" y="155.397" stroke-width=".265">task</tspan></text><text x="-411.153" y="160.688" text-align="center" xml:space="preserve" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;line-height:1.25"><tspan x="-411.153" y="160.688" stroke-width=".265">task</tspan></text><text x="-411.269" y="172.548" text-align="center" xml:space="preserve" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;line-height:1.25"><tspan x="-411.269" y="172.548" stroke-width=".265">task</tspan></text><text x="-411.269" y="178.23" text-align="center" xml:space="preserve" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;line-height:1.25"><tspan x="-411.269" y="178.23" stroke-width=".265">task</tspan></text></g><text x="-471.726" y="194.027" xml:space="preserve" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;line-height:1.25"><tspan x="-471.726" y="194.027"><tspan stroke-width=".265" font-weight="bold">wsi</tspan> (may be detached)</tspan><tspan x="-471.726" y="196.672"><tspan stroke-width=".265" font-weight="bold">task</tspan> function pointer</tspan><tspan x="-471.726" y="199.318"><tspan stroke-width=".265" font-weight="bold">cleanup</tspan> function pointer</tspan><tspan x="-471.726" y="201.964"><tspan stroke-width=".265" font-weight="bold">user</tspan> private pointer</tspan></text></g><text x="-452.336" y="213.375" stroke-width=".677" font-size="5.415" text-align="center" text-anchor="middle" xml:space="preserve" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;line-height:1.25"><tspan x="-452.336" y="213.375" stroke-width=".677">Threadpool</tspan></text></g><g><path d="m-53.889 51.059c-0.2293-0.20876-0.45859-0.41752-0.68788-0.62628h-2.0842c-0.41073-0.4478-0.80598-0.91066-1.2269-1.3486-0.15635-0.18661-0.4411-0.26749-0.65538-0.13157-0.2532 0.13273-0.37597 0.41669-0.39448 0.69074-0.04758 0.31909 0.05354 0.68674 0.35175 0.85254 0.18832 0.10808 0.49386 0.04671 0.5437-0.19062 0.06699-0.21357-0.06488-0.51518-0.31343-0.50948-0.16072 3e-3 -0.26391 0.28316-0.07717 0.33226 0.08893 0.01617 0.10978-0.27326 0.17002-0.07939 0.0638 0.17507-0.16528 0.31938-0.28293 0.16402-0.213-0.21052-0.14192-0.60391 0.10406-0.75718 0.23529-0.07437 0.39199 0.16171 0.52824 0.31112 0.3873 0.42849 0.77336 0.85822 1.1601 1.2873 0.95481 0.0017 1.9097 0.0034 2.8645 0.0051z" transform="translate(-414.26 162.67)"/><path fill="red" d="m-56.225 50.077c0.07138-0.08712 0.14278-0.17424 0.21416-0.26135 0.10648 0.11858 0.21295 0.23715 0.31943 0.35573 0.19118 0.0012 0.38235 0.0025 0.57352 0.0036-0.2069-0.22868-0.41381-0.45737-0.62072-0.68605 0.10043-0.11374 0.20086-0.22747 0.30128-0.34121 0.19601 0.22868 0.39203 0.45737 0.58804 0.68605-0.0012-0.219-0.0025-0.43801-0.0036-0.65701-0.10043-0.11252-0.20085-0.22505-0.30128-0.33758 0.07198-0.10615 0.24907-0.21551 0.08668-0.31451-0.36406-0.40214-0.72811-0.80428-1.0922-1.2064-0.76543-0.0026-1.5317 0.01021-2.2966-0.0021-0.1821-0.01604-0.40898-0.07372-0.45071-0.28286-0.088-0.27195 0.21101-0.59285 0.48564-0.46528 0.18982 0.03674 0.11004 0.42003-0.05779 0.29297 0.17429-0.25602-0.31955-0.22697-0.17976 0.02451 0.09575 0.22004 0.44485 0.25635 0.58255 0.05617 0.14323-0.2308-0.05154-0.4937-0.2705-0.58497-0.21915-0.10466-0.49117-0.07771-0.67434 0.08567-0.27378 0.20864-0.40621 0.61643-0.22752 0.92795 0.104 0.233 0.33446 0.38219 0.58455 0.41121 0.33507 0.04187 0.67431 0.01608 1.0114 0.02326h1.3407c0.25409 0.28192 0.50818 0.56384 0.76228 0.84577-0.22868 0.25288-0.45736 0.50576-0.68605 0.75865-0.16572-0.21381-0.41577-0.37628-0.51666-0.63121-0.08161-0.29871 0.35413-0.53156 0.5618-0.30555 0.19943 0.11035-0.01178 0.46291-0.15577 0.26978 0.1166-0.03951 0.16904-0.22582-0.01437-0.21638-0.21499 0.08183-0.12303 0.40655 0.0643 0.46926 0.17871 0.08651 0.40261-0.07556 0.3799-0.27118 0.01826-0.28278-0.18842-0.5907-0.48713-0.60388-0.31967-0.06227-0.68039 0.12472-0.75854 0.45263-0.10766 0.28228 0.06955 0.56541 0.26324 0.75966 0.22723 0.24585 0.44911 0.49691 0.67408 0.74475z" transform="translate(-414.26 162.67)"/><path d="m-54.464 50.361c0.0017-0.54757 0.0034-1.0951 0.0051-1.6427-0.33832-0.38748-0.69457-0.75998-1.021-1.1574-0.10913-0.13496-0.19252-0.29467-0.18614-0.47289-0.0086-0.33136 0.19731-0.65612 0.50556-0.78212 0.23741-0.10513 0.52154-0.11525 0.754 0.0094 0.3243 0.16516 0.47791 0.61109 0.30157 0.93353-0.13519 0.19951-0.48216 0.19542-0.59404-0.0265-0.1079-0.14135-0.10151-0.43084 0.10373-0.47103 0.16696-0.0034 0.20764 0.24106 0.02397 0.25083-0.04085 0.15882 0.28306 0.12232 0.27255-0.04546 0.04138-0.23154-0.21514-0.42013-0.4314-0.37653-0.24357 0.02414-0.45758 0.28096-0.37332 0.52553 0.08871 0.24037 0.30285 0.40102 0.46218 0.59282 0.25613 0.27896 0.51148 0.55865 0.76757 0.83766-0.0017 0.61002-0.0034 1.22-0.0051 1.8301-0.19509-0.0017-0.3902-0.0035-0.58527-0.0051z" transform="translate(-414.26 162.67)"/></g><path fill="#acf" d="m-449.68 167.64 11.817 0.23143-4e-3 -1.8179 3.3851 3.7575-3.6277 3.3848-0.13429-1.8176-13.274 0.23777c0.0499-1.679 7e-3 -2.161 0.0144-4.0462z"/><text x="-443.223" y="170.565" fill="#000" stroke-width=".415" font-family="'Open Sans'" font-size="3.323" letter-spacing="0" text-align="center" text-anchor="middle" word-spacing="0" xml:space="preserve" style="font-feature-settings:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;line-height:1.25"><tspan x="-443.223" y="170.565" stroke-width=".415">enqueue</tspan></text><g fill="none" stroke="#000"><path stroke-width=".965" marker-end="url(#b)" d="m-387.42 123.83c1.3484-0.56118 1.6984-1.3714 1.7386-3.1608"/><g stroke-width=".265"><path d="m-387.65 115.01 1.2568 1.7529"/><path d="m-383.25 120.07 3.4065 1.0253"/><path d="m-383.68 117.3 2.4143-1.2568"/><path d="m-387.19 119.94-1.9513 1.1245"/><path d="m-387.59 118.92-2.8112-0.52916"/><path d="m-384.84 116.57 0.8599-1.6867"/><path d="m-382.92 118.75 2.8773-0.26458"/><path d="m-384.35 120.84 1.3891 2.3151"/><path d="m-387.52 117.66-2.282-1.2237"/></g></g></g></svg>